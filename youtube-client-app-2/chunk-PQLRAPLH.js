import{g as l,jb as f,r as u,u as c}from"./chunk-Z3YPE75W.js";var p=typeof document=="object"&&!!document,o=class r{static get(t,i){if(t==null)return null;let e=r.parse(t.getItem(i)||"null")||null;return e===null?null:typeof e=="object"&&typeof e._expired<"u"&&e._expired!==0&&+new Date>e._expired?(r.remove(t,i),null):e._value||null}static set(t,i,e,n=0,s="t"){t?.setItem(i,r.stringify({_expired:r.getExpired(n,s),_value:e}))}static remove(t,i){t?.removeItem(i)}static key(t,i){return t==null?null:t.key(i)}static getExpired(t,i){if(t<=0)return 0;let e=+new Date;switch(i){case"s":return e+1e3*t;case"m":return e+1e3*60*t;case"h":return e+1e3*60*60*t;case"d":return e+1e3*60*60*24*t;case"w":return e+1e3*60*60*24*7*t;case"y":return e+1e3*60*60*24*365*t;case"t":return e+t;default:return 0}}static stringify(t){return JSON.stringify(t)}static parse(t){try{return JSON.parse(t)||null}catch{return t}}};var m=(()=>{let t=class t{constructor(e){this.storage=e}get(e){return o.get(this.storage,e)}set(e,n,s=0,a="d"){return o.set(this.storage,e,n,s,a)}remove(e){if(typeof e=="string"){o.remove(this.storage,e);return}let n=0,s=o.key(this.storage,n),a=[];for(;s;)e.test(s)&&a.push(s),s=o.key(this.storage,++n);a.forEach(d=>o.remove(this.storage,d))}clear(){this.storage?.clear()}};t.\u0275fac=function(n){return new(n||t)(c(Storage))},t.\u0275prov=u({token:t,factory:t.\u0275fac});let r=t;return r})(),h=(()=>{let t=class t extends m{constructor(){super(p?localStorage:null)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var S=(()=>{let t=class t{constructor(e,n){this.router=e,this.lsService=n,this.KEY="userCredentials",this.authStatus=new l(this.isAuth())}login(e,n){let s={username:e,password:n};this.lsService.set(this.KEY,{credentials:s}),this.authStatus.next(this.isAuth()),this.router.navigate(["/main"])}logout(){this.lsService.remove(this.KEY),this.authStatus.next(this.isAuth()),this.router.navigate(["/login"])}isAuth(){return this.lsService.get(this.KEY)!==null}getAuthStatus(){return this.authStatus.asObservable()}};t.\u0275fac=function(n){return new(n||t)(c(f),c(h))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();export{S as a};
