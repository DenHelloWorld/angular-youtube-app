import{bb as v,d as x,e as V,g as h,i as p,j as y,o as R,r as u,u as f}from"./chunk-Z3YPE75W.js";var g=x((m,w)=>{"use strict";(function(s,i){typeof m=="object"&&typeof w<"u"?i(m):typeof define=="function"&&define.amd?define(["exports"],i):i((s=typeof globalThis<"u"?globalThis:s||self).buildUrl={})})(m,function(s){"use strict";function i(r,e,a){var n=[];for(var j in r)(function(c){var l,b;Object.prototype.hasOwnProperty.call(r,c)&&r[c]!==void 0&&(Array.isArray(r[c])&&r[c].length?a?(b=a==="order_desc"?r[c].length-1:0,r[c].forEach(function(d){switch(l=d!==0?d||"":0,a){case"array":n.push("".concat(c,"[]=").concat(encodeURIComponent(String(l).trim())));break;case"order_asc":n.push("".concat(c,"[").concat(b++,"]=").concat(encodeURIComponent(String(l).trim())));break;case"order_desc":n.push("".concat(c,"[").concat(b--,"]=").concat(encodeURIComponent(String(l).trim())));break;default:n.push("".concat(c,"=").concat(encodeURIComponent(String(l).trim())))}})):(l=r[c].map(function(d){return encodeURIComponent(String(d!==0?d||"":0).trim())}),n.push("".concat(c,"=").concat(encodeURIComponent(String(l).trim())))):(l=e?String(r[c]).toLowerCase()||"":r[c]!==0?r[c]||"":0,n.push("".concat(c,"=").concat(encodeURIComponent(String(l).trim())))))})(j);return"?".concat(n.join("&"))}function D(r,e,a){e===void 0&&(e=""),e[e.length-1]==="/"&&(e=e.slice(0,-1));var n=String(r).trim();return a&&(n=n.toLowerCase()),n.indexOf("/")===0?e+=n:e+="/".concat(n),e}function t(r,e){var a="#".concat(String(r).trim());return e?a.toLowerCase():a}function o(r,e){var a;return r===null?a="":typeof r=="object"?(a="",e=r):a=r,e!=null&&e.path&&(a=D(e.path,a,e.lowerCase)),e!=null&&e.queryParams&&(a+=i(e.queryParams,e.lowerCase,e.disableCSV)),e!=null&&e.hash&&(a+=t(e.hash,e.lowerCase)),a}s.appendPath=D,s.buildHash=t,s.buildQueryString=i,s.buildUrl=o,s.default=o,Object.defineProperty(s,"__esModule",{value:!0})})});var I=V(g());var T="/search";var C="/videos";var S={detailsByVideoId(s){return(0,I.buildUrl)(C,{queryParams:{part:"snippet,contentDetails,statistics",id:s}})??""},videosByTitle(s){return(0,I.buildUrl)(T,{queryParams:{part:"snippet",type:"video",q:s,maxResults:10}})??""}};var B=(()=>{let i=class i{constructor(t){this.http=t}getById(t){let o=S.detailsByVideoId(t);return this.http.get(o).pipe(p(r=>r.items))}getByTitle(t){let o=S.videosByTitle(t);return this.http.get(o).pipe(p(r=>r.items.map(e=>e.id.videoId)),R(r=>y(r.map(e=>this.getById(e)))),p(r=>r.flat()))}};i.\u0275fac=function(o){return new(o||i)(f(v))},i.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var L=(()=>{let i=class i{constructor(){this.filterTitle=new h(""),this.filterDate=new h(""),this.filterView=new h(""),this.detalisId=new h(""),this.searchResultsData=new h({filterTitle:"",filterDate:"",filterViews:"",searchInputHeader:"",searchedItems:[]}),this.filterTitle$=this.filterTitle.asObservable(),this.filterDate$=this.filterDate.asObservable(),this.filterView$=this.filterView.asObservable(),this.searchResultsData$=this.searchResultsData.asObservable(),this.detalisId$=this.detalisId.asObservable()}setFilterTitle(t){this.filterTitle.next(t)}setFilterDate(t){this.filterDate.next(t)}setFilterView(t){this.filterView.next(t)}setSearchResultsData(t){this.searchResultsData.next(t)}setDetalisId(t){this.detalisId.next(t)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var J=(()=>{let i=class i{constructor(t,o){this.youtubeService=t,this.sharedService=o,this.SearchResultsData={filterTitle:"",filterDate:"",filterViews:"",searchInputHeader:"",searchedItems:[]},this.subscriptions=[],this.handleFiltersChange()}handleFiltersChange(){this.sharedService.filterTitle$.subscribe(t=>{this.SearchResultsData.filterTitle=t,this.listenSearchResultsData()}),this.sharedService.filterDate$.subscribe(t=>{this.SearchResultsData.filterDate=t,this.listenSearchResultsData()}),this.sharedService.filterView$.subscribe(t=>{this.SearchResultsData.filterViews=t,this.listenSearchResultsData()}),this.subscriptions.push(this.sharedService.searchResultsData$.subscribe(t=>{this.SearchResultsData=t}))}listenSearchResultsData(){this.sharedService.setSearchResultsData(this.SearchResultsData)}destroyListeners(){this.subscriptions.forEach(t=>t.unsubscribe())}searchByTitle(t){this.youtubeService.getByTitle(t).subscribe(o=>{this.SearchResultsData.searchedItems=o})}searchedItems(){return this.searchByTitle(this.SearchResultsData.searchInputHeader),this.SearchResultsData.searchedItems}};i.\u0275fac=function(o){return new(o||i)(f(B),f(L))},i.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();export{B as a,L as b,J as c};
